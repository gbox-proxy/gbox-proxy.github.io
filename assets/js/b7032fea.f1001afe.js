"use strict";(self.webpackChunkgbox_proxy_github_io=self.webpackChunkgbox_proxy_github_io||[]).push([[403],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=u(n),m=i,y=d["".concat(s,".").concat(m)]||d[m]||c[m]||o;return n?r.createElement(y,a(a({ref:t},p),{},{components:n})):r.createElement(y,a({ref:t},p))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,a=new Array(o);a[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,a[1]=l;for(var u=2;u<o;u++)a[u]=n[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2009:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return l},metadata:function(){return u},toc:function(){return c}});var r=n(7462),i=n(3366),o=(n(7294),n(3905)),a=["components"],l={id:"securing",title:"Securing",sidebar_label:"Securing",image:"https://gbox-proxy.github.io/img/gbox-full.png",slug:"/securing"},s=void 0,u={unversionedId:"securing",id:"securing",title:"Securing",description:"The GBox offers you some security features to prevent common attacks malicious to GraphQL APIs.",source:"@site/docs/05-securing.mdx",sourceDirName:".",slug:"/securing",permalink:"/securing",editUrl:"https://github.com/gbox-proxy/gbox-proxy.github.io/edit/main/docs/05-securing.mdx",tags:[],version:"current",lastUpdatedBy:"Minh Vuong",lastUpdatedAt:1651746649,formattedLastUpdatedAt:"5/5/2022",sidebarPosition:5,frontMatter:{id:"securing",title:"Securing",sidebar_label:"Securing",image:"https://gbox-proxy.github.io/img/gbox-full.png",slug:"/securing"},sidebar:"main",previous:{title:"Auto invalidate cache",permalink:"/caching/auto-invalidate-cache"},next:{title:"Monitoring",permalink:"/monitoring"}},p={},c=[{value:"Disable introspection queries",id:"disable-introspection-queries",level:2},{value:"Query complexity",id:"query-complexity",level:2},{value:"Max query depths",id:"max-query-depths",level:3},{value:"Node count limit",id:"node-count-limit",level:3},{value:"Max query complexity",id:"max-query-complexity",level:3}],d={toc:c};function m(e){var t=e.components,n=(0,i.Z)(e,a);return(0,o.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The GBox offers you some security features to prevent common attacks malicious to GraphQL APIs."),(0,o.kt)("h2",{id:"disable-introspection-queries"},"Disable introspection queries"),(0,o.kt)("p",null,"Gives full information about the schema and may not be desired in production.\nTo avoid this, you could disable GraphQL introspection via ",(0,o.kt)("inlineCode",{parentName:"p"},"GBOX_DISABLED_INTROSPECTION")," environment variable, set value of it to ",(0,o.kt)("inlineCode",{parentName:"p"},"true")," to disable."),(0,o.kt)("h2",{id:"query-complexity"},"Query complexity"),(0,o.kt)("p",null,"Set of GraphQL query filters by depths, nodes count, and max complexity. All filters are enabled by default, if you want to disable it, set ",(0,o.kt)("inlineCode",{parentName:"p"},"GBOX_ENABLED_COMPLEXITY")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"false"),"."),(0,o.kt)("h3",{id:"max-query-depths"},"Max query depths"),(0,o.kt)("p",null,"Restricts a GraphQL operation based on its depth, preventing deeply nested queries."),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"GraphQL introspection queries are included from depth limits."))),(0,o.kt)("p",null,"You can see various queries as examples and their depths here:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-graphql"},"  # depth = 1\n  query deep1 {\n    dummy # root field have type's scalar.\n  }\n\n  # depth = 2\n  query deep2 {\n    books { # root field have type's list or object.\n      title\n    }\n  }\n\n  # depth = 3\n  query deep3 {\n    books { # root field have type's object list or object.\n      title\n      author { # subfield have type's list or object.\n         name\n      }\n    }\n  }\n")),(0,o.kt)("p",null,"By default, query max depth's ",(0,o.kt)("inlineCode",{parentName:"p"},"15"),", if you want to increase or decrease, try to set ",(0,o.kt)("inlineCode",{parentName:"p"},"GBOX_MAX_DEPTH")," environment variable, set to ",(0,o.kt)("inlineCode",{parentName:"p"},"0")," to disable query max depths filter."),(0,o.kt)("h3",{id:"node-count-limit"},"Node count limit"),(0,o.kt)("p",null,"Restricts a GraphQL operation based on the number of nodes query may return. This helps in limiting the number of different pieces of related data to be fetched."),(0,o.kt)("p",null,"A node is defined as a field with a selection set."),(0,o.kt)("p",null,"For example, in the query below, the number of nodes is 3, and they are books, author and users."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-graphql"},"query {\n  books {\n    title\n    author {\n      name\n    }\n  }\n  users {\n    id\n    name\n  }\n}\n")),(0,o.kt)("p",null,"By default, node count limit's ",(0,o.kt)("inlineCode",{parentName:"p"},"60"),", if you want to increase or decrease, try to set ",(0,o.kt)("inlineCode",{parentName:"p"},"GBOX_NODE_COUNT_LIMIT")," environment variable, set to ",(0,o.kt)("inlineCode",{parentName:"p"},"0")," to disable node count limit filter."),(0,o.kt)("h3",{id:"max-query-complexity"},"Max query complexity"),(0,o.kt)("p",null,"Restricts a GraphQL operation based on the number of nodes that might be needed to execute the query. This helps in limiting the number of different pieces of related data to be fetched."),(0,o.kt)("p",null,"For example, in the query below, the complexity is 3."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-graphql"},"query {\n  books {\n    title\n    author {\n      name\n    }\n  }\n  users {\n    id\n    name\n  }\n}\n")),(0,o.kt)("p",null,"By default, max complexity of query are ",(0,o.kt)("inlineCode",{parentName:"p"},"60"),", if you want to increase or decrease, try to set ",(0,o.kt)("inlineCode",{parentName:"p"},"GBOX_MAX_COMPLEXITY")," environment variable, set to ",(0,o.kt)("inlineCode",{parentName:"p"},"0")," to disable query complexity filter."))}m.isMDXComponent=!0}}]);